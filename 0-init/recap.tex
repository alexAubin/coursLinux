\documentclass [a4paper]{article}

%\usepackage[latin1]{inputenc}
\usepackage[utf8]{inputenc}
\usepackage{color}
\usepackage[french]{babel}
%\usepackage[francais]{babel}
\usepackage{rotating}
\usepackage {color}
\usepackage {latexsym}
\usepackage {graphicx, epsfig}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{supertabular}
\usepackage{lscape}
\usepackage{array}
\usepackage{longtable}
\usepackage{color}
\usepackage{colortbl}

\usepackage{geometry}
\geometry{a4paper, top=1.3cm, bottom=1.8cm, left=1.5cm, right=1.5cm}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newcommand{\nn}{\nonumber \\}
\newcommand{\bc}{\begin{center}}
\newcommand{\ec}{\end{center}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{document}

\noindent Initiation à Linux
\bc
 \textbf{RAPPELS DES COMMANDES UNIX} \\
\ec


\noindent\begin{tabular}{p{17.2cm}}
 \hline
 \\
\end{tabular}

On suppose qu'il existe l'arborescence suivante dans votre répertoire personnel (\verb+home+) :

\begin{verbatim}
                               /home/padawan/
                              ___________|____________________________
                              |                    |        |        |
                             dev/               music/     pics/    docs/
                       _______|             _______|________
                       |      |             |      |       |
                 teaching/  yunohost/   hiphop/  poprock/  electro/
                       |      |_______________________________________________
                       |      |      |        |         |          |         |
                linux.html   en.json  app.py  domain.py   bin/     helpers/  hooks/
\end{verbatim}

Vous vous trouvez dans le répertoire {\verb+music/electro/+} (on nomme ce répertoire
 le {\it répertoire courant}). Depuis ce répertoire, tous les chemins suivants sont équivalents :\\
(absolu)  \verb+/home/padawan/dev/yunohost/app.py+\\
(absolu)  \verb+$HOME/dev/yunohost/app.py+\\
(absolu)  \verb+~/dev/yunohost/app.py+\\
(relatif) \verb+../../dev/yunohost/app.py+\\
(relatif) \verb+../../pics/././../dev/teaching/../yunohost/app.py+\\
et aussi: \verb+/var/cache/../../home/./padawan/dev/yunohost/app.py+\\

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section*{Commandes indispensables}

\noindent
\begin{tabular}{ lll }
\hline
{\verb+man+}    & \verb+commande+              & (\textbf{man}ual) Obtenir des informations sur une commande \\
{\verb+passwd+} &                              & (\textbf{passw}or\textbf{d}) Changer son mot de passe \\
{\verb+cd+}     & \verb+destination+           & (\textbf{c}hange \textbf{d}irectory) Changer de répertoire (si pas de destination, va dans \verb+$HOME+)\\
{\verb+ls+}     & \verb+repertoire+            & (\textbf{l}i\textbf{s}t) Lister le contenu du répertoire \\
                & \hspace{-0.6cm}\verb+-l+                    & \hspace{0.4cm} Ajoute des détails (permissions, date de modification, taille)\\
                & \hspace{-0.6cm}\verb+-a+                    & \hspace{0.4cm} Liste aussi les fichiers cachés (commençant par .)\\
                & \hspace{-0.6cm}\verb+-t+                    & \hspace{0.4cm} Liste en triant suivant la date de modification\\
                & \hspace{-0.6cm}\verb+-h+                    & \hspace{0.4cm} Affiche les tailles de fichiers en un format lisible facilement\\
{\verb+mkdir+}  & \verb+repertoire+            & (\textbf{m}a\textbf{k}e \textbf{dir}ectory) Créer un répertoire \\
{\verb+mv+}     & \verb+source(s) destination+ & (\textbf{m}o\textbf{v}e) Renommer un fichier (ou déplacer plusieurs fichiers dans un répertoire) \\
{\verb+cp+}     & \verb+fichier destination+   & (\textbf{c}o\textbf{p}y) Copier un fichier\\
                & \hspace{-0.6cm}\verb+-r dossier destination+  & \hspace{0.4cm} Copier récursivement un dossier\\
                & \verb+fichier(s) repertoire+                  & \hspace{0.4cm} Copie des fichiers dans un répertoire déjà existant\\
{\verb+rm+}     & \verb+fichier(s)+            & (\textbf{r}e\textbf{m}ove) Supprimer \textbf{définitivement} des fichiers \\
                & \hspace{-0.6cm}\verb+-r+                      & \hspace{0.4cm} Suppression récursive (et \textbf{définitive}) de répertoires\\
                & \hspace{-0.6cm}\verb+-i+                      & \hspace{0.4cm} Demande confirmation avant les suppressions \\
\hline
\end{tabular}

\section*{Commandes de base}

\noindent
\begin{tabular}{ lll }
\hline
{\verb+echo+}   & \verb+chaîne+              & Afficher une chaîne de caractère dans la sortie \\
{\verb+touch+}  & \verb+fichier+             & Créer un fichier (ou changer sa date de modification sans rien changer) \\
{\verb+pwd+}    &                            & (\textbf{p}rint \textbf{w}orking \textbf{d}irectory) Obtenir le nom du répertoire courant \\
{\verb+whoami+} &                            & (\textbf{who am I}) Obtenir votre nom d'utilisateur \\
{\verb+date+}   &                            & (\textbf{date}) Afficher la date \\
{\verb+chmod+}  & \verb+permissions fichier+ & (\textbf{ch}ange \textbf{mod}e) Changer les permissions d'un fichier \\
{\verb+chown+}  & \verb+utilisateur fichier+ & (\textbf{ch}ange \textbf{own}er) Changer le propriétaire d'un fichier \\
{\verb+chgrp+}  & \verb+groupe fichier+      & (\textbf{ch}ange \textbf{gr}ou\textbf{p}e) Changer le groupe d'un fichier \\
{\verb+du+}     & \verb+fichier+             & (\textbf{d}isk \textbf{u}sage) Connaître l'espace disque utilisé par un fichier \\
                & \hspace{-0.6cm}\verb+-h+                  & \hspace{0.4cm} Donne les tailles dans un format plus facilement lisible \\
                & \hspace{-0.6cm}\verb+-s+                  & \hspace{0.4cm} Donne uniquement le total pour les dossiers\\
                & \hspace{-0.6cm}\verb+-c+                  & \hspace{0.4cm} Donne le total de la liste\\
{\verb+ln+}     & \verb+destination lien+    & (\textbf{l}i\textbf{n}k) Créer un lien dur \\
                & \hspace{-0.6cm}\verb+-s+                  & \hspace{0.4cm} Créer un lien symbolique plutôt qu'un lien dur \\
\hline
\end{tabular}


\section*{Caractères speciaux}

\noindent
\begin{tabular}{ ll }
\hline
{\verb+;+}             & Sépare des commandes à exécuter à la suite \\
{\verb+&&+}            & Sépare des commandes à exécuter à la suite (s'arrête si il y a eu des erreurs)\\
{\verb+~+}             & Désigne le chemin vers votre répertoire personnel (\verb+$HOME+) \\
{\verb+.+}             & Désigne le répertoire courant \\
{\verb+..+}            & Désigne le répertoire parent \\
{\verb+?+}             & Symbole ``joker'', interprété comme \og{} n'importe quel caractère \fg{} \\
{\verb+*+}             & Symbole ``joker'', interprété comme \og{} n'importe quelle chaîne de caractère \fg{} \\
{\verb+\+}             & Inhibe l'interprétation du caractère spécial suivant \\
{\verb+'+ et \verb+"+} & Délimite des chaînes de caractère \\
{\verb+`+}             & Délimite une commande à interpréter dans les arguments d'une autre commande \\
{\verb+$VAR+}          & Désigne le contenu de la variable shell \verb+VAR+ \\
\hline
Exemples                                            &   \\
\hspace{0.5cm}{\verb+echo "Je suis dans"; pwd+}     & Affiche du texte suivi du chemin absolu du répertoire courant \\
\hspace{0.5cm}{\verb+compile prog.c && ./prog.exe+} & Compile \verb+prog.c+ et exécute \verb+prog.exe+, sauf si la compilation a échoué \\
\hspace{0.5cm}{\verb+touch ~/toto+}                 & Créé un fichier \verb+toto+ dans votre répertoire personnel \\
\hspace{0.5cm}{\verb+touch ./toto+}                 & Créé un fichier \verb+toto+ dans le répertoire courant (équivalent à \verb+touch toto+)\\
\hspace{0.5cm}{\verb+cd ..+}                        & Va dans le répertoire parent au répertoire courant\\
\hspace{0.5cm}{\verb+ls ../../rep2/file?+}          & Liste les fichiers \verb+fileb+ et \verb+filec+ dans \verb+rep2+ \\
\hspace{0.5cm}{\verb+ls prog.*+}                    & Liste les fichiers \verb+prog.c+ et \verb+prog.exe+ dans \verb+rep1/sousrep1/+ \\
\hspace{0.5cm}{\verb+echo Une étoile : \*+}         & Affiche le texte \og{} \verb+Une étoile : *+ \fg{} \\
\hspace{0.5cm}{\verb+echo "Une étoile : *"+}        & Affiche le texte \og{} \verb+Une étoile : *+ \fg{} \\
\hspace{0.5cm}{\verb+echo "Je suis dans `pwd`"+}    & Affiche du texte suivi du chemin absolu du répertoire courant\\
\hspace{0.5cm}{\verb+echo "J'habite dans $HOME"+}   & Affiche du texte suivi du chemin vers votre espace personnel \\
\hline
\end{tabular}


\section*{Gestion des entrées-sorties}

\begin{figure}[h!]
\begin{verbatim}
                                         +--------------+
                                stdin    |              |   stdout
                            ------------>+   Commande   +----------->
                                Entrée   |              |   Sortie
                               standard  +------+-------+  standard
                                                |
                                                |  stderr
                                                +---------->
                                                   Erreur
                                                  standard
\end{verbatim}
\end{figure}
\noindent
\begin{tabular}{ ll }
\hline
{\verb+<+}  & Utilise un fichier comme entrée standard \\
{\verb+<<<+}& Utiliser une chaîne de caractère comme entrée standard \\
{\verb+>+}  & Redirige la sortie standard vers un fichier (écrase l'ancien fichier) \\
{\verb+>>+} & Redirige la sortie standard vers un fichier (à la suite du fichier) \\
{\verb+2>+} & Redirige l'erreur standard vers un fichier \\
{\verb+&>+} & Redirige la sortie et l'erreur standard vers un fichier \\
{\verb+|+}  & Redirige la sortie standard d'une commande vers \\
            & l'entrée standard d'une autre commande  \\
\hline
{Exemples}                                                   & \\
\hspace{0.5cm}{\verb+./prog.exe < inputFile > outputFile+}   & Exécute \verb+prog.exe+ avec \verb+inputFile+ en entrée \\
                                                             & et met la sortie dans \verb+outputFile+ après l'avoir écrasé \\
\hspace{0.5cm}{\verb+ls | ./prog.exe >> outputFile+}         & Exécute \verb+prog.exe+ avec la sortie de \verb+ls+ en entrée, \\
                                                             & et met la sortie à la suite de \verb+outputFile+ \\
    \hspace{0.5cm}{\verb+./prog.exe > /dev/null+}            & Exécute \verb+prog.exe+ en ignorant la sortie standard  \\
                                                             & (\verb+/dev/null+ est l'équivalent d'une poubelle) \\
\hline
\end{tabular}

\section*{Raccourcis de la ligne de commande}

\noindent
\begin{tabular}{ ll }
\hline
TAB                                 & Auto-compléter une commande ou un nom de fichier \\
TAB $\times$ 2                      & Montrer les possibilités d'autocomplétion (lorsqu'il y a ambiguité) \\
{$\uparrow$/$\downarrow$}           & Parcourir les commandes de l'historique \\
\verb+history+                      & Afficher l'historique des commandes \\
{Ctrl + R}                          & Rechercher une commande dans l'historique \\
{Ctrl + A/E}                        & Aller au début/à la fin de la ligne de commande \\
{Ctrl + U/K}                        & Supprimer tous les caractères à gauche/droite du curseur \\
{Ctrl + W}                          & Supprimer le mot à gauche du curseur \\
\hline
\end{tabular}


\section*{Gestion des processus}

\noindent
\begin{tabular}{ ll }
\hline
{Ctrl + C}                    & Arrêter l'exécution de la commande en cours \\
\verb+commande &+             & Exécute \verb+commande+ en tâche de fond \\
{Ctrl + Z puis \verb+bg+}     & Passe la commande en cours d'exécution en tâche de fond \\
{\verb+jobs+}                 & Lister les processus de votre shell qui sont en tâche de fond \\
{\verb+ps -ef+}               & Lister \textbf{tous} les process en cours d'exécution sur la machine \\
{\verb+kill     PID+}         & Tuer un processus en cours (via son identifiant \verb+PID+)\\
{\verb+pkill    processName+} & Tuer un processus en cours (via son nom \verb+processName+)\\
{\verb+      -9  + }          & Tuer brutalement le processus\\
{\verb+top+}                  & Visualiser l'utilisation de la mémoire et du CPU par les processus\\
{\verb+    -i +}              & Seulement les processus actifs\\
{\verb+    -pPID+}            & Seulement le(s) processus correspondant(s) au(x) PID(s) donné(s)\\
{\verb+    -uUSER+}           & Seulement les processus d'un utilisateur donné\\
{\verb+screen+}               & Ouvre une session screen qui permet de lancer des commandes dans un terminal \\
                              & qui continuera d'exister même si l'on quitte le terminal initial.\\
\hline
\end{tabular}


\section*{Lecture et édition de fichiers}

\noindent
\begin{tabular}{ ll }
\hline
{\verb+cat+}    & Affiche le contenu des fichiers dans la sortie standard\\
{\verb+less+}   & Lire et naviguer dans un fichier\\
{\verb+nano+}   & Edite un fichier avec \verb+nano+ (éditeur minimaliste)\\
{\verb+vim+}    & Edite un fichier avec \verb+vim+ (pour les ninjas)\\
{\verb+xemacs+} & Edite un fichier avec \verb+xemacs+ (pour les pirates)\\
{\verb+nedit+}  & Edite un fichier avec \verb+nedit+ (en interface graphique)\\
{\verb+evince+} & Lire un fichier pdf (en interface graphique)\\
\hline
\end{tabular}

\section*{Fichiers de configuration, variables d'environnement}

\noindent
\begin{tabular}{ll}
\hline
{\verb+~/.bashrc+}            & Fichier de configuration qui est exécuté à chaque connexion\\
{\verb+env+}                  & Commande qui liste toutes les variables d'environnement définies et leurs valeurs\\
{\verb+VAR=3.14+}             & Changer la valeur de \verb+VAR+ (pas d'espaces autour de \verb+=+ !)\\
{\verb+export VAR+}           & Rend la valeur de \verb+VAR+ disponible pour tous les process fils de ce shell\\
{\verb+echo "VAR vaut $VAR"+} & Affiche la valeur de \verb+VAR+\\
{\verb+$USER+}                & Nom d'utilisateur\\
{\verb+$HOSTNAME+}            & Nom de la machine\\
{\verb+$HOME+}                & Répertoire personnel\\
{\verb+$PATH+}                & Liste des répertoires où les commandes sont recherchées\\
{\verb+$LD_LIBRARY_PATH+}     & Liste des répertoires où les librairies sont recherchées\\
{\verb+$PS1+}                 & Décrit la forme de l'invite de commande en bash\\
{\verb+$?+}                   & Code de retour de la dernière commande lancée \\
\hline
\end{tabular}

\section*{Filtres et commandes avancées}

Note : les filtres peuvent généralement être utilisés aussi bien sur un fichier que sur l'entrée standard (via \og \verb+|+ \fg{})
\noindent
\begin{tabular}{ ll }
\hline
{\verb+grep+}                 & Permet de filtrer ligne par ligne suivant un mot ou un motif\\
{\verb+sed+}                  & Permet de remplacer une expression par une autre\\
{\verb+diff+}                 & Afficher les différences entre deux fichiers\\
{\verb+cut+}                  & Manipuler les colonnes d'une entrée\\
{\verb+tr+}                   & Remplacer ou enlever des caractères\\
{\verb+find+}                 & Rechercher des fichiers suivant des critères\\
{\verb+wc+}                   & Permet de compter des mots, des lignes, ..\\
{\verb+bc+}                   & Effectuer des opérations arithmétiques basiques\\
{\verb+ssh+}                  & Se connecter de façon sécurisée à une autre machine\\
{\verb+scp+}                  & Copier des fichiers entre deux machines \\
{\verb+tar+}                  & Compresser ou décompresser des fichiers (format \verb+tar+)\\
{\verb+gzip+, \verb+gunzip+}  & Compresser ou décompresser des fichiers (format \verb+gz+)\\
{\verb+alias+}                & Créer des alias\\
\hline
Exemples                                         & \\
\hspace{0.5cm}{\verb+grep -nr "warning" ./+}              & Cherche récursivement les occurences de \verb+warning+\\
                                                          & dans les fichiers du répertoire courant\\
\hspace{0.5cm}{\verb+./prog.exe | grep "warning"+}        & Affiche seulement les lignes contenant \verb+warning+\\
                                                          & de la sortie du programme \verb+prog.exe+\\
\hspace{0.5cm}{\verb+sed "s/search/replace/g" inputFile+} & Affiche le contenu de \verb+inputFile+ en remplaçant \\
                                                          & toutes les occurences de \verb+search+ par \verb+replace+\\
\hspace{0.5cm}{\verb+diff file1 file2+}                   & Compare les fichiers \verb+file1+ et \verb+file2+\\
\hspace{0.5cm}{\verb+cut -d " " -f 2,3 inputFile+}        & Affiche les colonnes 2 et 3 (\verb+-f 2,3+) du fichier \verb+inputFile+, \\
                                                          & par rapport aux espaces (\verb+-d " "+). \\
\hspace{0.5cm}{\verb+cat inputFile | tr " " ":"+}         & Affiche le contenu de \verb+inputFile+ avec les espaces remplacés par \verb+:+\\
\hspace{0.5cm}{\verb+find ../ -name "*.cpp"+}             & Trouver tous les fichiers se finissant par \verb+.cpp+\\
                                                          & dans le répertoire parent\\
\hspace{0.5cm}{\verb+wc -l *+}                            & Compte le nombre de ligne pour chaque fichier du répertoire\\
\hspace{0.5cm}{\verb?bc <<< "1+2"?}                       & Effectue l'opération 1+2 et affiche le résultat\\
\hspace{0.5cm}{\verb?ssh user@host?}                      & Se connecter à la machine \verb+host+ en tant que \verb+user+\\
\hspace{0.5cm}{\verb?scp user@host:/home/user/file ./?}   & Copie le fichier \verb+/home/user/file+ situé sur la machine \verb+host+ \\
                                                          & dans le répertoire courant \\
\hspace{0.5cm}{\verb?lpr -Pbb8 outputFile?}               & Imprime le fichier \verb+outputFile+ avec l'imprimante nommée \verb+bb8+\\
\hspace{0.5cm}{\verb?tar -xvf archive.tar?}               & Décompresse le fichier \verb+archive.tar+\\
\hspace{0.5cm}{\verb?gzip inputFile?}                     & Compresse \verb+inputFile+ en un fichier \verb+inputFile.gz+\\
\hspace{0.5cm}{\verb?alias ll='ls -l'?}                   & Créer un alias \verb+ll+ qui correspond à la commande \verb+ls -l+\\

\hline
\end{tabular}



\end{document}
